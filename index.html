<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="images/favicon.png">
    <title>21st Century Leadership Assessment</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600&display=swap" rel="stylesheet">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Design System Styles */
        :root {
            --primary-color: #81EDFF;
            --background-color: #EDEAE7;
            --surface-color: #FFFFFF;
            --text-primary: #222222;
            --text-secondary: #666666;
            --border-light: #DEDEDE;
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Manrope', sans-serif;
            background-color: var(--background-color);
            color: var(--text-primary);
            line-height: 1.5;
        }

        .logo-section {
            text-align: center;
            margin-bottom: 2rem;
            padding-top: 2rem;
        }

        .logo {
            height: 50px;
            width: auto;
            max-width: 100%;
            display: block;
            margin: 0 auto;
        }

        /* Hero Section */
        .hero-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            min-height: 100vh;
        }

        .hero-content {
            max-width: 800px;
            width: 100%;
        }

        .hero-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 2rem;
            text-align: center;
            line-height: 1.2;
        }

        /* Image Banner */
        .image-banner {
            margin-bottom: 3rem;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-md);
            border: 2px solid #82EDFF;
        }

        .banner-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            display: block;
        }

        /* Start Survey Button */
        .start-survey-btn {
            display: block;
            margin: 0 auto;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            border-radius: 8px;
            border: 1px solid var(--primary-color);
            transition: all 200ms ease;
            cursor: pointer;
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: #000000;
            padding: 0.75rem 2rem;
            font-size: 1.125rem;
            line-height: 1.5;
            font-family: 'Manrope', sans-serif;
        }

        .start-survey-btn:hover:not(:disabled) {
            background-color: #6BD9EC;
            border-color: #6BD9EC;
        }

        .start-survey-btn:active:not(:disabled) {
            transform: translateY(1px);
        }
        .start-survey-btn:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-color);
        }

        .progress-text {
            display: inline-block;
            font-size: 0.75rem;
            color: #909090;
            font-weight: 500;
            min-width: 70px;
            text-align: right;
        }

        /* Category Scores Section */
        .category-scores {
            text-align: center;
            margin-bottom: 2rem;
        }

        .category-scores h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
        }

        .category-result {
            background-color: #F8F9FA;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid var(--border-light);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .category-header h4 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }

        .category-percentage {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .category-bar {
            width: 100%;
            height: 8px;
            background-color: var(--background-color);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.75rem;
        }

        .category-fill {
            height: 100%;
            background-color: var(--primary-color);
            transition: width 500ms ease;
            border-radius: 4px;
        }

        .category-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .category-stats span {
            font-weight: 500;
        }

        /* Survey Container */
        .survey-container {
            max-width: 700px;
            width: 100%;
            margin: 0 auto;
            padding: 2rem;
            background-color: var(--surface-color);
            border-radius: 12px;
            box-shadow: var(--shadow-md);
            margin-top: 2rem;
            margin-bottom: 2rem;
        }

        /* Survey Header */
        .survey-header {
            margin-bottom: 2rem;
        }

        .survey-header h2 {
            font-size: 0.75rem;
            font-weight: 500;
            color: #909090;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Progress Bar */
        .progress-bar-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.25rem;
        }

        .progress-bar {
            width: calc(100% - 80px);
            height: 8px;
            background-color: var(--background-color);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            transition: width 300ms ease;
        }

        /* Question Container */
        .question-container {
            margin-bottom: 1rem;
            text-align: center;
        }

        .question-container h3 {
            font-size: 1.25rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 1rem;
            line-height: 1.6;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Options Container */
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            max-width: 400px;
            margin: 0 auto;
        }

        .option-button {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            padding: 0.875rem 1rem;
            border: 2px solid var(--border-light);
            border-radius: 8px;
            background-color: transparent;
            cursor: pointer;
            transition: all 200ms ease;
            text-align: left;
            min-height: 48px;
        }

        .option-button:hover {
            border-color: var(--primary-color);
            background-color: rgba(129, 237, 255, 0.1);
        }

        .option-button.selected {
            border-color: var(--primary-color);
            background-color: rgba(129, 237, 255, 0.1);
        }

        .option-label {
            font-size: 0.95rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .option-value {
            display: none; /* Hide the point values from users */
        }

        /* Navigation Buttons */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            margin-top: 2rem;
            padding: 0 1rem;
        }

        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: #000000;
            padding: 0.875rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 200ms ease;
            border: 1px solid var(--primary-color);
            min-width: 120px;
        }

        .btn-primary:hover:not(:disabled) {
            background-color: #6BD9EC;
            border-color: #6BD9EC;
        }

        .form-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .form-col {
            flex: 1;
        }

        .form-col label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .form-col input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border-light);
            border-radius: 8px;
            font-size: 1rem;
            font-family: var(--font-family);
            transition: border-color 0.3s ease;
        }

        .form-col input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .form-col input.error {
            border-color: #ef4444;
        }

        .error-message {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }

        .btn-secondary {
            background-color: transparent;
            border-color: var(--border-light);
            color: var(--text-secondary);
            padding: 0.875rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 200ms ease;
            border: 1px solid var(--border-light);
            min-width: 120px;
        }

        .btn-secondary:hover:not(:disabled) {
            background-color: #F5F5F5;
            border-color: #CCCCCC;
            color: var(--text-primary);
        }

        .btn-primary:active:not(:disabled) {
            transform: translateY(1px);
        }

        .btn-primary:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-color);
        }

        .btn-secondary:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--border-light);
        }

        /* Results Container */
        .results-container {
            text-align: center;
        }

        .results-container h2 {
            font-size: 2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2rem;
        }

        .completion-message {
            font-size: 1.125rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        /* Score Summary */
        .overall-score {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 3rem;
            text-align: center;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            box-shadow: var(--shadow-md);
        }

        .score-percentage {
            font-size: 2.5rem;
            font-weight: 600;
            color: #000000;
            line-height: 1;
        }

        .score-label {
            font-size: 0.875rem;
            color: #000000;
            font-weight: 500;
        }

        .score-details {
            font-size: 1.125rem;
            color: var(--text-secondary);
        }

        .score-details p {
            margin-bottom: 0.5rem;
        }

        /* Answers Summary */
        .answers-summary {
            text-align: left;
            margin-bottom: 2rem;
        }

        .answers-summary h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .answer-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background-color: #F5F5F5;
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .question-text {
            flex: 1;
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .answer-score {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 0.875rem;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .logo {
                height: 40px;
                max-width: 100%;
                display: block;
                margin: 0 auto;
            }

            .logo-section {
                margin-bottom: 1.5rem;
                padding-top: 1.5rem;
            }

            .hero-title {
                font-size: 2rem;
                margin-bottom: 2rem;
            }

            .banner-image {
                height: 200px;
            }

            .start-survey-btn {
                padding: 0.625rem 1.5rem;
                font-size: 1rem;
                border-radius: 8px;
                display: block;
                margin: 0 auto;
            }

            .hero-section {
                padding: 1rem;
                flex-direction: column;
            }

            .survey-container {
                padding: 1.5rem;
                margin: 1rem;
                max-width: 100%;
            }

            .survey-header h2 {
                font-size: 0.6875rem;
                font-weight: 500;
                color: #909090;
            }

            .question-container h3 {
                font-size: 1.125rem;
            }

            .options-container {
                max-width: 320px;
                gap: 0.375rem;
            }

            .option-button {
                padding: 0.75rem 0.875rem;
                min-height: 44px;
            }

            .option-label {
                font-size: 0.875rem;
            }

            .progress-bar-container {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.25rem;
            }

            .progress-bar {
                width: 100%;
            }

            .progress-text {
                text-align: center;
                min-width: auto;
            }

            .navigation-buttons {
                flex-direction: column;
                gap: 0.75rem;
                padding: 0 0.5rem;
            }

            .btn-primary, .btn-secondary {
                width: 100%;
                min-width: auto;
            }

            .category-result {
                max-width: 100%;
                margin-left: 0.5rem;
                margin-right: 0.5rem;
            }

            .category-header {
                flex-direction: column;
                align-items: center;
                gap: 0.5rem;
            }

            .category-stats {
                flex-direction: column;
                align-items: center;
                gap: 0.25rem;
            }
        }

        @media (max-width: 480px) {
            .logo {
                height: 35px;
                max-width: 100%;
                display: block;
                margin: 0 auto;
            }

            .logo-section {
                padding-top: 1rem;
            }

            .hero-title {
                font-size: 1.75rem;
            }

            .banner-image {
                height: 150px;
            }

            .survey-container {
                padding: 1rem;
            }

            .category-result {
                padding: 1rem;
                margin-left: 0.25rem;
                margin-right: 0.25rem;
            }

            .category-header {
                flex-direction: column;
                align-items: center;
                gap: 0.375rem;
            }

            .category-stats {
                flex-direction: column;
                align-items: center;
                gap: 0.25rem;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const Survey = ({ onComplete, categories }) => {
            const [currentCategoryIndex, setCurrentCategoryIndex] = useState(0);
            const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
            const [answers, setAnswers] = useState({});
            const [showResults, setShowResults] = useState(false);

            const options = [
                { label: "Strongly Agree", value: 5, color: "#10B981" },
                { label: "Agree", value: 4, color: "#3B82F6" },
                { label: "Neutral", value: 3, color: "#F59E0B" },
                { label: "Disagree", value: 2, color: "#EF4444" },
                { label: "Strongly Disagree", value: 1, color: "#DC2626" }
            ];

            const currentCategory = categories[currentCategoryIndex];
            const currentQuestion = currentCategory.questions[currentQuestionIndex];
            const totalQuestions = categories.reduce((sum, cat) => sum + cat.questions.length, 0);
            const currentGlobalQuestionNumber = categories
                .slice(0, currentCategoryIndex)
                .reduce((sum, cat) => sum + cat.questions.length, 0) + currentQuestionIndex + 1;

            const handleAnswerSelect = (questionId, value) => {
                const newAnswers = {
                    ...answers,
                    [questionId]: value
                };
                setAnswers(newAnswers);
                // Save answers to localStorage
                localStorage.setItem('surveyAnswers', JSON.stringify(newAnswers));
            };

            const handleNext = () => {
                if (currentQuestionIndex < currentCategory.questions.length - 1) {
                    setCurrentQuestionIndex(currentQuestionIndex + 1);
                } else if (currentCategoryIndex < categories.length - 1) {
                    setCurrentCategoryIndex(currentCategoryIndex + 1);
                    setCurrentQuestionIndex(0);
                } else {
                    // After the last question (50th), show additional questions page
                    onComplete();
                }
            };

            const handlePrevious = () => {
                if (currentQuestionIndex > 0) {
                    setCurrentQuestionIndex(currentQuestionIndex - 1);
                } else if (currentCategoryIndex > 0) {
                    setCurrentCategoryIndex(currentCategoryIndex - 1);
                    setCurrentQuestionIndex(categories[currentCategoryIndex - 1].questions.length - 1);
                }
            };

            const calculateScores = () => {
                const categoryScores = categories.map(category => {
                    const categoryAnswers = Object.entries(answers)
                        .filter(([key, value]) => {
                            // Parse global question index from key (format: "globalIndex")
                            const questionIndex = parseInt(key);
                            const categoryStart = categories.slice(0, category.id - 1)
                                .reduce((sum, cat) => sum + cat.questions.length, 0);
                            const categoryEnd = categoryStart + category.questions.length;
                            return questionIndex >= categoryStart && questionIndex < categoryEnd;
                        })
                        .map(([_, value]) => value);

                    const totalScore = categoryAnswers.reduce((sum, score) => sum + score, 0);
                    const maxScore = category.questions.length * 5;
                    const percentage = categoryAnswers.length > 0 ? Math.round((totalScore / maxScore) * 100) : 0;

                    return {
                        category: category.name,
                        total: totalScore,
                        max: maxScore,
                        percentage: percentage,
                        average: categoryAnswers.length > 0 ? Math.round((totalScore / categoryAnswers.length) * 10) / 10 : 0,
                        questionCount: categoryAnswers.length
                    };
                });

                const overallTotal = Object.values(answers).reduce((sum, score) => sum + score, 0);
                const totalQuestions = categories.reduce((sum, cat) => sum + cat.questions.length, 0);
                const overallPercentage = Math.round((overallTotal / (totalQuestions * 5)) * 100);

                return {
                    categories: categoryScores,
                    overall: {
                        total: overallTotal,
                        max: totalQuestions * 5,
                        percentage: overallPercentage,
                        average: Math.round((overallTotal / totalQuestions) * 10) / 10
                    }
                };
            };

            const getScoreInterpretation = (percentage) => {
                if (percentage >= 90) return "Exceptional";
                if (percentage >= 80) return "Strong";
                if (percentage >= 70) return "Good";
                if (percentage >= 60) return "Developing";
                return "Emerging";
            };

            const progress = (currentGlobalQuestionNumber / totalQuestions) * 100;

            if (showResults) {
                const scores = calculateScores();
                return (
                    React.createElement('div', { className: 'survey-container' },
                        React.createElement('div', { className: 'logo-section' },
                            React.createElement('img', {
                                src: 'images/logo.svg',
                                alt: '21st Century Leadership Logo',
                                className: 'logo'
                            })
                        ),
                        React.createElement('div', { className: 'results-container' },
                            React.createElement('h2', null, 'Assessment Complete!'),
                            React.createElement('div', { className: 'overall-score' },
                                React.createElement('div', { className: 'score-circle' },
                                    React.createElement('span', { className: 'score-percentage' }, scores.overall.percentage + '%'),
                                    React.createElement('span', { className: 'score-label' }, 'Overall Score')
                                ),
                                React.createElement('div', { className: 'score-details' },
                                    React.createElement('p', null, 'Total Score: ' + scores.overall.total + '/' + scores.overall.max),
                                    React.createElement('p', null, 'Average Score: ' + scores.overall.average + '/5')
                                )
                            ),
                            React.createElement('div', { className: 'category-scores' },
                                React.createElement('h3', null, 'Category Breakdown:'),
                                scores.categories.map((cat, index) =>
                                    React.createElement('div', { key: cat.category + index, className: 'category-result' },
                                        React.createElement('div', { className: 'category-header' },
                                            React.createElement('h4', null, 'Category ' + (index + 1) + ': ' + cat.category),
                                            React.createElement('span', { className: 'category-percentage' }, cat.percentage + '%')
                                        ),
                                        React.createElement('div', { className: 'category-bar' },
                                            React.createElement('div', {
                                                className: 'category-fill',
                                                style: { width: Math.max(cat.percentage, 2) + '%' }
                                            })
                                        ),
                                        React.createElement('div', { className: 'category-stats' },
                                            React.createElement('span', null, 'Score: ' + cat.total + '/' + cat.max),
                                            React.createElement('span', null, 'Avg: ' + cat.average + '/5'),
                                            React.createElement('span', null, getScoreInterpretation(cat.percentage))
                                        )
                                    )
                                )
                            ),
                            React.createElement('div', { className: 'action-buttons' },
                                React.createElement('button', {
                                    className: 'btn-secondary',
                                    onClick: () => {
                                        setCurrentCategoryIndex(0);
                                        setCurrentQuestionIndex(0);
                                        setAnswers({});
                                        setShowResults(false);
                                    }
                                }, 'Take Assessment Again'),
                                React.createElement('button', {
                                    className: 'btn-primary',
                                    onClick: onComplete
                                }, 'Back to Home')
                            )
                        )
                    )
                );
            }

            const questionId = currentGlobalQuestionNumber;

            return (
                React.createElement('div', { className: 'app' },
                    React.createElement('div', { className: 'logo-section' },
                        React.createElement('img', {
                            src: 'images/logo.svg',
                            alt: '21st Century Leadership Logo',
                            className: 'logo'
                        })
                    ),
                    React.createElement('div', { className: 'survey-container' },
                        React.createElement('div', { className: 'survey-header' },
                            React.createElement('h2', null, 'Category ' + (currentCategoryIndex + 1) + ': ' + currentCategory.name + ' Assessment'),
                            React.createElement('div', { className: 'progress-bar-container' },
                                React.createElement('div', { className: 'progress-bar' },
                                    React.createElement('div', { className: 'progress-fill', style: { width: progress + '%' } })
                                ),
                                React.createElement('span', { className: 'progress-text' },
                                    currentGlobalQuestionNumber + ' of ' + totalQuestions
                                )
                            )
                        ),
                        React.createElement('div', { className: 'question-container' },
                            React.createElement('h3', null, currentQuestion),
                            React.createElement('div', { className: 'options-container' },
                                options.map((option) =>
                                    React.createElement('button', {
                                        key: option.value,
                                        className: 'option-button ' + (answers[questionId] === option.value ? 'selected' : ''),
                                        style: {
                                            borderColor: answers[questionId] === option.value ? option.color : '#DEDEDE',
                                            backgroundColor: answers[questionId] === option.value ? option.color + '20' : 'transparent'
                                        },
                                        onClick: () => handleAnswerSelect(questionId, option.value)
                                    },
                                        React.createElement('span', { className: 'option-label' }, option.label)
                                        /* Removed option-value display for cleaner look */
                                    )
                                )
                            )
                        ),
                        React.createElement('div', { className: 'navigation-buttons' },
                            React.createElement('button', {
                                className: 'btn-secondary',
                                onClick: handlePrevious,
                                disabled: currentCategoryIndex === 0 && currentQuestionIndex === 0
                            }, 'Previous'),
                            React.createElement('button', {
                                className: 'btn-primary',
                                onClick: handleNext,
                                disabled: answers[questionId] === undefined
                            }, (currentCategoryIndex === categories.length - 1 && currentQuestionIndex === currentCategory.questions.length - 1) ? 'Continue' : 'Next')
                        )
                    )
                )
            );
        };

        const AdditionalQuestions = ({ onComplete }) => {
            const [additionalAnswers, setAdditionalAnswers] = useState({});

            const handleSubmit = () => {
                // Save additional answers to localStorage for potential use in results
                localStorage.setItem('additionalAnswers', JSON.stringify(additionalAnswers));
                onComplete();
            };

            return (
                React.createElement('div', { className: 'app' },
                    React.createElement('div', { className: 'logo-section' },
                        React.createElement('img', {
                            src: 'images/logo.svg',
                            alt: '21st Century Leadership Logo',
                            className: 'logo'
                        })
                    ),
                    React.createElement('div', { className: 'survey-container' },
                        React.createElement('div', { className: 'survey-header' },
                            React.createElement('h2', null, 'Additional Questions'),
                            React.createElement('div', { className: 'progress-bar-container' },
                                React.createElement('div', { className: 'progress-bar' },
                                    React.createElement('div', { className: 'progress-fill', style: { width: '100%' } })
                                ),
                                React.createElement('span', { className: 'progress-text' },
                                    'Additional Questions'
                                )
                            )
                        ),
                        React.createElement('div', { className: 'question-container' },
                            React.createElement('h3', null, 'Please provide additional information to help us understand your context better.'),
                            React.createElement('div', { className: 'options-container' },
                                React.createElement('div', { className: 'form-group', style: { marginBottom: '1.5rem' } },
                                    React.createElement('label', { style: { display: 'block', marginBottom: '0.5rem', fontWeight: '600', color: 'var(--text-primary)' } },
                                        '1. What\'s the most important thing leadership could change to improve our culture?'
                                    ),
                                    React.createElement('input', {
                                        type: 'text',
                                        value: additionalAnswers.q1 || '',
                                        onChange: (e) => setAdditionalAnswers(prev => ({ ...prev, q1: e.target.value })),
                                        style: {
                                            width: '100%',
                                            padding: '0.75rem 1rem',
                                            border: '2px solid var(--border-light)',
                                            borderRadius: '8px',
                                            fontSize: '1rem',
                                            fontFamily: 'var(--font-family)'
                                        },
                                        placeholder: 'Enter your thoughts on improving culture'
                                    })
                                ),
                                React.createElement('div', { className: 'form-group', style: { marginBottom: '1.5rem' } },
                                    React.createElement('label', { style: { display: 'block', marginBottom: '0.5rem', fontWeight: '600', color: 'var(--text-primary)' } },
                                        '2. Where do you see the biggest opportunity for innovation?'
                                    ),
                                    React.createElement('input', {
                                        type: 'text',
                                        value: additionalAnswers.q2 || '',
                                        onChange: (e) => setAdditionalAnswers(prev => ({ ...prev, q2: e.target.value })),
                                        style: {
                                            width: '100%',
                                            padding: '0.75rem 1rem',
                                            border: '2px solid var(--border-light)',
                                            borderRadius: '8px',
                                            fontSize: '1rem',
                                            fontFamily: 'var(--font-family)'
                                        },
                                        placeholder: 'Enter your thoughts on innovation opportunities'
                                    })
                                ),
                                React.createElement('div', { className: 'form-group', style: { marginBottom: '1.5rem' } },
                                    React.createElement('label', { style: { display: 'block', marginBottom: '0.5rem', fontWeight: '600', color: 'var(--text-primary)' } },
                                        '3. How can we better prepare for AI?'
                                    ),
                                    React.createElement('input', {
                                        type: 'text',
                                        value: additionalAnswers.q3 || '',
                                        onChange: (e) => setAdditionalAnswers(prev => ({ ...prev, q3: e.target.value })),
                                        style: {
                                            width: '100%',
                                            padding: '0.75rem 1rem',
                                            border: '2px solid var(--border-light)',
                                            borderRadius: '8px',
                                            fontSize: '1rem',
                                            fontFamily: 'var(--font-family)'
                                        },
                                        placeholder: 'Enter your thoughts on AI preparation'
                                    })
                                ),
                                React.createElement('div', { className: 'form-group', style: { marginBottom: '1.5rem' } },
                                    React.createElement('label', { style: { display: 'block', marginBottom: '0.5rem', fontWeight: '600', color: 'var(--text-primary)' } },
                                        '4. What future skills or capabilities should we focus on developing?'
                                    ),
                                    React.createElement('input', {
                                        type: 'text',
                                        value: additionalAnswers.q4 || '',
                                        onChange: (e) => setAdditionalAnswers(prev => ({ ...prev, q4: e.target.value })),
                                        style: {
                                            width: '100%',
                                            padding: '0.75rem 1rem',
                                            border: '2px solid var(--border-light)',
                                            borderRadius: '8px',
                                            fontSize: '1rem',
                                            fontFamily: 'var(--font-family)'
                                        },
                                        placeholder: 'Enter your thoughts on future skills'
                                    })
                                )
                            )
                        ),
                        React.createElement('div', { className: 'navigation-buttons' },
                            React.createElement('button', {
                                className: 'btn-primary',
                                onClick: handleSubmit
                            }, 'Continue')
                        )
                    )
                )
            );
        };

        const UserDetails = ({ onComplete }) => {
            const [formData, setFormData] = useState({
                firstName: '',
                lastName: '',
                email: '',
                phone: '',
                company: '',
                jobTitle: ''
            });
            const [errors, setErrors] = useState({});

            const handleInputChange = (field, value) => {
                setFormData(prev => ({
                    ...prev,
                    [field]: value
                }));
                // Clear error when user starts typing
                if (errors[field]) {
                    setErrors(prev => ({
                        ...prev,
                        [field]: ''
                    }));
                }
            };

            const validateForm = () => {
                const newErrors = {};

                if (!formData.firstName.trim()) {
                    newErrors.firstName = 'Please enter your first name';
                }

                if (!formData.lastName.trim()) {
                    newErrors.lastName = 'Please enter your last name';
                }

                if (!formData.email.trim()) {
                    newErrors.email = 'Please enter your email address';
                } else if (!/\S+@\S+\.\S+/.test(formData.email)) {
                    newErrors.email = 'Please enter a valid email address';
                }

                setErrors(newErrors);
                return Object.keys(newErrors).length === 0;
            };

            const handleSubmit = (e) => {
                e.preventDefault();

                if (validateForm()) {
                    // Save user details to localStorage
                    localStorage.setItem('userDetails', JSON.stringify(formData));
                    onComplete();
                }
            };

            return (
                React.createElement('div', { className: 'app' },
                    React.createElement('div', { className: 'logo-section' },
                        React.createElement('img', {
                            src: 'images/logo.svg',
                            alt: '21st Century Leadership Logo',
                            className: 'logo'
                        })
                    ),
                    React.createElement('div', { className: 'survey-container' },
                        React.createElement('div', { className: 'survey-header' },
                            React.createElement('h2', null, 'Almost there! Tell us a bit about yourself'),
                            React.createElement('div', { className: 'progress-bar-container' },
                                React.createElement('div', { className: 'progress-bar' },
                                    React.createElement('div', { className: 'progress-fill', style: { width: '100%' } })
                                ),
                                React.createElement('span', { className: 'progress-text' },
                                    'Final Step'
                                )
                            )
                        ),
                        React.createElement('div', { className: 'question-container' },
                            React.createElement('form', { onSubmit: handleSubmit },
                                React.createElement('div', { className: 'form-row' },
                                    React.createElement('div', { className: 'form-col' },
                                        React.createElement('label', { htmlFor: 'firstName' }, 'First Name *'),
                                        React.createElement('input', {
                                            type: 'text',
                                            id: 'firstName',
                                            name: 'firstName',
                                            value: formData.firstName,
                                            onChange: (e) => handleInputChange('firstName', e.target.value),
                                            className: errors.firstName ? 'error' : ''
                                        }),
                                        errors.firstName && React.createElement('div', { className: 'error-message' }, errors.firstName)
                                    ),
                                    React.createElement('div', { className: 'form-col' },
                                        React.createElement('label', { htmlFor: 'lastName' }, 'Last Name *'),
                                        React.createElement('input', {
                                            type: 'text',
                                            id: 'lastName',
                                            name: 'lastName',
                                            value: formData.lastName,
                                            onChange: (e) => handleInputChange('lastName', e.target.value),
                                            className: errors.lastName ? 'error' : ''
                                        }),
                                        errors.lastName && React.createElement('div', { className: 'error-message' }, errors.lastName)
                                    )
                                ),
                                React.createElement('div', { className: 'form-row' },
                                    React.createElement('div', { className: 'form-col' },
                                        React.createElement('label', { htmlFor: 'email' }, 'Email Address *'),
                                        React.createElement('input', {
                                            type: 'email',
                                            id: 'email',
                                            name: 'email',
                                            value: formData.email,
                                            onChange: (e) => handleInputChange('email', e.target.value),
                                            className: errors.email ? 'error' : ''
                                        }),
                                        errors.email && React.createElement('div', { className: 'error-message' }, errors.email)
                                    ),
                                    React.createElement('div', { className: 'form-col' },
                                        React.createElement('label', { htmlFor: 'phone' }, 'Phone Number'),
                                        React.createElement('input', {
                                            type: 'tel',
                                            id: 'phone',
                                            name: 'phone',
                                            value: formData.phone,
                                            onChange: (e) => handleInputChange('phone', e.target.value)
                                        })
                                    )
                                ),
                                React.createElement('div', { className: 'form-row' },
                                    React.createElement('div', { className: 'form-col' },
                                        React.createElement('label', { htmlFor: 'company' }, 'Company/Organization'),
                                        React.createElement('input', {
                                            type: 'text',
                                            id: 'company',
                                            name: 'company',
                                            value: formData.company,
                                            onChange: (e) => handleInputChange('company', e.target.value)
                                        })
                                    ),
                                    React.createElement('div', { className: 'form-col' },
                                        React.createElement('label', { htmlFor: 'jobTitle' }, 'Job Title'),
                                        React.createElement('input', {
                                            type: 'text',
                                            id: 'jobTitle',
                                            name: 'jobTitle',
                                            value: formData.jobTitle,
                                            onChange: (e) => handleInputChange('jobTitle', e.target.value)
                                        })
                                    )
                                ),
                                React.createElement('div', { className: 'navigation-buttons' },
                                    React.createElement('button', {
                                        type: 'submit',
                                        className: 'btn-primary'
                                    }, 'View Results')
                                )
                            )
                        )
                    )
                )
            );
        };

        const App = () => {
            const [currentView, setCurrentView] = useState('landing');

            // All categories with their questions
            const categories = [
                {
                    id: 1,
                    name: "Leadership",
                    questions: [
                        "Leaders clearly communicate our organisation's vision and direction.",
                        "Managers encourage experimentation and accept mistakes as part of learning.",
                        "Leaders actively develop people's skills and careers.",
                        "My manager provides regular, constructive feedback.",
                        "Decision-making authority is delegated to the appropriate level.",
                        "Leadership behaviour matches the organisation's stated values.",
                        "Leaders create an environment where diverse perspectives are valued.",
                        "Leaders demonstrate transparency and honesty in their communication.",
                        "I see leaders modelling ethical and responsible behaviour.",
                        "Senior leaders inspire me to do my best work."
                    ]
                },
                {
                    id: 2,
                    name: "Innovation",
                    questions: [
                        "Employees are encouraged to suggest new ideas and improvements.",
                        "The organisation provides time or resources to test new ideas.",
                        "Successful ideas are scaled beyond their initial pilot stage.",
                        "Innovation initiatives are aligned with our strategic priorities.",
                        "We celebrate successes and learn openly from failures.",
                        "Cross-functional teams collaborate effectively on innovation projects.",
                        "We move quickly from idea to testing to implementation.",
                        "Innovation is seen as everyone's responsibility, not just R&D.",
                        "Leaders actively remove barriers to innovation.",
                        "Our organisation has a clear process for measuring innovation impact."
                    ]
                },
                {
                    id: 3,
                    name: "Culture",
                    questions: [
                        "People at all levels feel safe to voice opinions without fear of reprisal.",
                        "Collaboration across departments is encouraged and supported.",
                        "Our workplace environment supports diversity and inclusion.",
                        "Recognition is given fairly and frequently for good work.",
                        "There is a strong sense of shared purpose across the organisation.",
                        "We respond well to change and adapt quickly.",
                        "There is open, transparent communication between levels and teams.",
                        "People feel engaged and motivated to contribute their best.",
                        "Our culture promotes both high performance and well-being.",
                        "We hold ourselves accountable for our results."
                    ]
                },
                {
                    id: 4,
                    name: "AI Readiness",
                    questions: [
                        "People here see AI as a tool to achieve breakthroughs, not just to save time and write emails.",
                        "Our teams use AI to tackle serious business challenges and seize major opportunities.",
                        "We actively invest in AI projects that aim for 10 improvements in performance or outcomes.",
                        "Employees are encouraged and supported to design AI-powered solutions, not only use prebuilt tools.",
                        "Leadership challenges us to think boldly about how AI can transform our products, services, and processes.",
                        "We measure AI initiatives by the real impact they deliver (e.g. improvements in revenue, productivity, customer experience) not just activity.",
                        "AI projects are embedded in our strategic priorities and linked to clear business goals.",
                        "People feel confident using AI to innovate, experiment, and disrupt how work is done.",
                        "Our organisation develops the skills and mindsets needed to lead in an AI-driven future.",
                        "We openly share success stories where AI has delivered major gains or solved difficult problems."
                    ]
                },
                {
                    id: 5,
                    name: "Future Growth & Learning",
                    questions: [
                        "The organisation invests in developing new skills for the future.",
                        "We are encouraged to learn and adapt continuously.",
                        "Career pathways are clear and future-focused.",
                        "Employees are supported to reskill for emerging technologies.",
                        "Leadership prioritises long-term development over short-term gains.",
                        "We benchmark ourselves against industry best practices.",
                        "People are rewarded for curiosity and lifelong learning.",
                        "We regularly scan the external environment for new trends.",
                        "Employees feel confident about the organisation's future direction.",
                        "Our culture motivates people to grow beyond their current roles."
                    ]
                }
            ];

            const calculateScores = (answers) => {
                const categoryScores = categories.map(category => {
                    const categoryAnswers = Object.entries(answers || {})
                        .filter(([key, value]) => {
                            // Parse global question index from key (format: "globalIndex")
                            const questionIndex = parseInt(key);
                            const categoryStart = categories.slice(0, category.id - 1)
                                .reduce((sum, cat) => sum + cat.questions.length, 0);
                            const categoryEnd = categoryStart + category.questions.length;
                            return questionIndex >= categoryStart && questionIndex < categoryEnd;
                        })
                        .map(([_, value]) => value);

                    const totalScore = categoryAnswers.reduce((sum, score) => sum + score, 0);
                    const maxScore = category.questions.length * 5;
                    const percentage = categoryAnswers.length > 0 ? Math.round((totalScore / maxScore) * 100) : 0;

                    return {
                        category: category.name,
                        total: totalScore,
                        max: maxScore,
                        percentage: percentage,
                        average: categoryAnswers.length > 0 ? Math.round((totalScore / categoryAnswers.length) * 10) / 10 : 0,
                        questionCount: categoryAnswers.length
                    };
                });

                const overallTotal = Object.values(answers || {}).reduce((sum, score) => sum + score, 0);
                const totalQuestions = categories.reduce((sum, cat) => sum + cat.questions.length, 0);
                const overallPercentage = Math.round((overallTotal / (totalQuestions * 5)) * 100);

                return {
                    categories: categoryScores,
                    overall: {
                        total: overallTotal,
                        max: totalQuestions * 5,
                        percentage: overallPercentage,
                        average: Math.round((overallTotal / totalQuestions) * 10) / 10
                    }
                };
            };

            const getScoreInterpretation = (percentage) => {
                if (percentage >= 90) return "Exceptional";
                if (percentage >= 80) return "Strong";
                if (percentage >= 70) return "Good";
                if (percentage >= 60) return "Developing";
                return "Emerging";
            };

            const handleStartSurvey = () => {
                setCurrentView('survey');
            };

            const handleSurveyComplete = () => {
                setCurrentView('additionalQuestions');
            };

            const handleAdditionalQuestionsComplete = () => {
                setCurrentView('userDetails');
            };

            const handleUserDetailsComplete = () => {
                setCurrentView('results');
            };

            const handleBackToHome = () => {
                setCurrentView('landing');
            };

            const renderCurrentView = () => {
                switch (currentView) {
                    case 'survey':
                        return React.createElement('div', { className: 'app' },
                            React.createElement(Survey, { onComplete: handleSurveyComplete, categories: categories })
                        );

                    case 'additionalQuestions':
                        return React.createElement('div', { className: 'app' },
                            React.createElement(AdditionalQuestions, { onComplete: handleAdditionalQuestionsComplete })
                        );

                    case 'userDetails':
                        return React.createElement('div', { className: 'app' },
                            React.createElement(UserDetails, { onComplete: handleUserDetailsComplete })
                        );

                    case 'results':
                        // Get answers from localStorage
                        const savedAnswers = JSON.parse(localStorage.getItem('surveyAnswers') || '{}');
                        const scores = calculateScores(savedAnswers);
                        return React.createElement('div', { className: 'app' },
                            React.createElement('div', { className: 'logo-section' },
                                React.createElement('img', {
                                    src: 'images/logo.svg',
                                    alt: '21st Century Leadership Logo',
                                    className: 'logo'
                                })
                            ),
                            React.createElement('div', { className: 'survey-container' },
                                React.createElement('div', { className: 'results-container' },
                                    React.createElement('h2', null, 'Assessment Complete!'),
                                    React.createElement('div', { className: 'overall-score' },
                                        React.createElement('div', { className: 'score-circle' },
                                            React.createElement('span', { className: 'score-percentage' }, scores.overall.percentage + '%'),
                                            React.createElement('span', { className: 'score-label' }, 'Overall Score')
                                        ),
                                        React.createElement('div', { className: 'score-details' },
                                            React.createElement('p', null, 'Total Score: ' + scores.overall.total + '/' + scores.overall.max),
                                            React.createElement('p', null, 'Average Score: ' + scores.overall.average + '/5')
                                        )
                                    ),
                                    React.createElement('div', { className: 'category-scores' },
                                        React.createElement('h3', null, 'Category Breakdown:'),
                                        scores.categories.map((cat, index) =>
                                            React.createElement('div', { key: cat.category + index, className: 'category-result' },
                                                React.createElement('div', { className: 'category-header' },
                                                    React.createElement('h4', null, 'Category ' + (index + 1) + ': ' + cat.category),
                                                    React.createElement('span', { className: 'category-percentage' }, cat.percentage + '%')
                                                ),
                                                React.createElement('div', { className: 'category-bar' },
                                                    React.createElement('div', {
                                                        className: 'category-fill',
                                                        style: { width: Math.max(cat.percentage, 2) + '%' }
                                                    })
                                                ),
                                                React.createElement('div', { className: 'category-stats' },
                                                    React.createElement('span', null, 'Score: ' + cat.total + '/' + cat.max),
                                                    React.createElement('span', null, 'Avg: ' + cat.average + '/5'),
                                                    React.createElement('span', null, getScoreInterpretation(cat.percentage))
                                                )
                                            )
                                        )
                                    ),
                                    React.createElement('div', { className: 'action-buttons' },
                                        React.createElement('button', {
                                            className: 'btn-secondary',
                                            onClick: () => {
                                                localStorage.removeItem('surveyAnswers');
                                                localStorage.removeItem('additionalAnswers');
                                                localStorage.removeItem('userDetails');
                                                setCurrentView('landing');
                                            }
                                        }, 'Take Assessment Again'),
                                        React.createElement('button', {
                                            className: 'btn-primary',
                                            onClick: handleBackToHome
                                        }, 'Back to Home')
                                    )
                                )
                            )
                        );

                    default:
                        return React.createElement('div', { className: 'app' },
                            React.createElement('main', { className: 'hero-section' },
                                React.createElement('div', { className: 'logo-section' },
                                    React.createElement('img', {
                                        src: 'images/logo.svg',
                                        alt: '21st Century Leadership Logo',
                                        className: 'logo'
                                    })
                                ),
                                React.createElement('div', { className: 'hero-content' },
                                    React.createElement('h1', { className: 'hero-title' }, '21st Century Leadership Assessment'),
                                    React.createElement('div', { className: 'image-banner' },
                                        React.createElement('img', {
                                            src: 'images/banner.jpg',
                                            alt: 'Leadership and teamwork',
                                            className: 'banner-image'
                                        })
                                    ),
                                    React.createElement('button', {
                                        className: 'start-survey-btn',
                                        onClick: handleStartSurvey
                                    }, 'Start Survey')
                                )
                            )
                        );
                }
            };

            return renderCurrentView();
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
